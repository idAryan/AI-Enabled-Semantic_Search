{% extends "base.html" %}
{% block title %}NCO-2015 Semantic Search{% endblock %}

{% block content %}

<!-- Header Section -->
<header class="text-center mb-8">
    <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">NCO-2015 Semantic Search Engine</h1>
    <p class="mt-2 text-md sm:text-lg text-gray-600">Enter a job title or description to find matching occupation codes.</p>
</header>

<!-- Search Input Section -->
<form method="POST" action="/" class="bg-white p-6 rounded-xl shadow-md mb-8">
    <div class="flex flex-col sm:flex-row items-center gap-4">
        <input type="text" name="query" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 'python developer' or 'hotel cook'" required>
        <button type="submit" class="w-full sm:w-auto bg-blue-600 text-white font-semibold px-8 py-3 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
            Search
        </button>
    </div>
</form>

{% if status %}
<div class="text-center my-4 text-gray-600">
    <p class="font-semibold">{{ status }}</p>
</div>
{% endif %}

{% if results %}
<!-- Results Table -->
<div class="bg-white rounded-xl shadow-md overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">NCO Code</th>
                <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Occupation Title</th>
                <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Description</th>
                <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Confidence</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for item in results %}
            <tr>
                <td class="px-6 py-4 text-sm font-medium text-gray-900">{{ item.code }}</td>
                <td class="px-6 py-4 text-sm font-semibold text-gray-800">{{ item.title }}</td>
                <td class="px-6 py-4 text-sm text-gray-600">{{ item.description }}</td>
                <td class="px-6 py-4 text-sm text-gray-900">{{ item.score }}%</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="text-center py-12 px-6 bg-white rounded-xl shadow-md">
    <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
      <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
    </svg>
    <h3 class="mt-2 text-lg font-medium text-gray-900">No results yet</h3>
    <p class="mt-1 text-sm text-gray-500">Your search results will appear here.</p>
</div>
{% endif %}

{% endblock %}
